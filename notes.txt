i	newblock.size	1 << i	bytes
0	1		1	0..32
1	2..3		2	33..64
2	4..7		4	65..128
3	8..15		8	129..256
4	16..31		16	257..512
5	32..63		32	513..1024
6	64..127		64	1025..2048
7	128..255	128	2049..4096
8	256..511	256	4097..8192
9	512..1023	512	8193..16384
10	1024(..2047)	1024	16385..32768



After alloc(6112):

@0x10000000 (0x000):
0011000000 0011000000 0010111111 10 ...
 = 300C02FE ...
FE 02 0C 30

@0x10001800 (0x0C0):
0000000000 0000000000 1100111111 00 0011000000 0011000000 ...
 = 00000CFC 300C0. ...
FC 0C 00 00 .. 0. 0C 30

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 8000 8000 00C0 8000



After alloc(3300):

@0x10000000 (0x000):
0100101000 0011000000 0010111111 10 ...
 = 4A0C02FE ...
FE 02 0C 4A

@0x10001800 (0x0C0):
0000000000 0100101000 0001100111 10 ...
 = 0012819E ...
9E 81 12 00

@0x10002500 (0x128):
0011000000 0000000000 1011010111 00 0100101000 0100101000 ...
 = 30000B5C 4A128. ...
5C 0B 00 30 .. 8. 12 4A

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 8000 8000 0128 8000



After alloc(8572):

@0x10000000 (0x000):
1000110100 0011000000 0010111111 10 ...
 = 8D0C02FE ...
FE 02 0C 8D

@0x10001800 (0x0C0):
0000000000 0100101000 0001100111 10 ...
 = 0012819E ...
9E 81 12 00

@0x10002500 (0x128):
0011000000 1000110100 0100001011 10 ...
 = 3023442E ...
2E 44 23 30

@0x10004680 (0x234):
0100101000 0000000000 0111001011 00 1000110100 1000110100 ...
 = 4A00072C 8D234. ...
2C 07 00 4A .. 4. 23 8D

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 8000 0234 8000 8000



After free([0]):

@0x10000000 (0x000):
1000110100 0011000000 0010111111 00 0000000000 0000000000 ...
 = 8D0C02FC 00000. ...
FC 02 0C 8D .. 0. 00 00

@0x10001800 (0x0C0):
0000000000 0100101000 0001100111 10 ...
 = 0012819E ...
9E 81 12 00

@0x10002500 (0x128):
0011000000 1000110100 0100001011 10 ...
 = 3023442E ...
2E 44 23 30

@0x10004680 (0x234):
0100101000 0000000000 0111001011 00 1000110100 1000110100 ...
 = 4A00072C 8D234. ...
2C 07 00 4A .. 4. 23 8D

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 0000 0234 8000 8000



After free([2]):

@0x10000000 (0x000):
0100101000 0011000000 0010111111 00 0000000000 0000000000 ...
 = 4A0C02FC 00000. ...
FC 02 0C 4A .. 0. 00 00

@0x10001800 (0x0C0):
0000000000 0100101000 0001100111 10 ...
 = 0012819E ...
9E 81 12 00

@0x10002500 (0x128):
0011000000 0000000000 1011010111 00 0100101000 0100101000 ...
 = 30000B5C 4A128. ...
5C 0B 00 30 .. 8. 12 4A

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 0000 8000 0128 8000



After alloc(2540):

@0x10000000 (0x000):
0100101000 0001010000 0001001111 10 ...
 = 4A05013E ...
3E 01 05 4A

@0x10000A00 (0x050):
0000000000 0011000000 0001101111 00 0001010000 0001010000 ...
 = 000C01BC 14050. ...
BC 01 0C 00 .. 0. 05 14

@0x10001800 (0x0C0):
0001010000 0100101000 0001100111 10 ...
 = 1412819E ...
9E 81 12 14

@0x10002500 (0x128):
0011000000 0000000000 1011010111 00 0100101000 0100101000 ...
 = 30000B5C 4A128. ...
5C 0B 00 30 .. 8. 12 4A

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 0050 8000 8000 0128 8000



After alloc(15990):

@0x10000000 (0x000 0000000000):
0x31C 0x050 79 1
1100011100 0001010000 0001001111 10
3E 01 05 C7

@0x10000A00 (0x050 0001010000):
0x000 0x0C0 111 0 0x050 0x050
0000000000 0011000000 0001101111 00 0001010000 0001010000
BC 01 0C 00 .. 0. 05 14

@0x10001800 (0x0C0 0011000000):
0x050 0x128 103 1
0001010000 0100101000 0001100111 10
9E 81 12 14

@0x10002500 (0x128 0100101000):
0x0C0 0x31C 499 1
0011000000 1100011100 0111110011 10
CE C7 31 30

@0x10006380 (0x31C 1100011100):
0x128 0x000 227 0 0x31C 0x31C
0100101000 0000000000 0011100011 00 1100011100 1100011100
8C 03 00 4A .. C. 31 C7

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 0050 031C 8000 8000 8000



After free([0]):

@0x10000000 (0x000 0000000000):
0x31c 0x0C0 191 0 0x31c 0x31c
1100011100 0011000000 0010111111 00 1100011100 1100011100
FC 02 0C C7 .. C. 31 C7

@0x10001800 (0x0C0 0011000000):
0x000 0x128 103 1
0000000000 0100101000 0001100111 10
9E 81 12 00

@0x10002500 (0x128 0100101000):
0x0C0 0x31C 499 1
0011000000 1100011100 0111110011 10
CE C7 31 30

@0x10006380 (0x31C 1100011100):
0x128 0x000 227 0 0x000 0x000
0100101000 0000000000 0011100011 00 0000000000 0000000000
8C 03 00 4A .. 0. 00 00

Ramses @0x2007C004:
8000 8000 8000 8000 8000 8000 8000 031C 8000 8000 8000




Performance

Control condition:
11140 us

Swap AND condition in if:
10680 us

-----------------------------
Total with all optimizations
5940 us
